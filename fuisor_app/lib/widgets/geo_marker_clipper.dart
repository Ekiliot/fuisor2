import 'package:flutter/material.dart';

/// CustomClipper для создания маркера в стиле Geo (каплевидная форма с хвостиком)
class GeoMarkerClipper extends CustomClipper<Path> {
  @override
  Path getClip(Size size) {
    double w = size.width;
    double h = size.height;

    // Каплевидная форма маркера на основе SVG
    // Форма: закругленный верх, сужающийся к низу с заостренным концом
    // Координаты нормализованы из SVG (218x255)
    
    return Path()
      // Начинаем с нижней правой точки (123.139, 248.999 в SVG)
      ..moveTo(w * 0.565, h * 0.976)
      // Кривая к нижней левой точке (94.8546, 248.999)
      ..cubicTo(
        w * 0.529, h * 1.007, // Контрольная точка 1 (115.328, 256.81)
        w * 0.471, h * 1.007, // Контрольная точка 2 (102.665, 256.81)
        w * 0.435, h * 0.976, // Конечная точка (94.8546, 248.999)
      )
      // Линия влево вверх (31.9244, 186.069)
      ..lineTo(w * 0.146, h * 0.730)
      // Кривая к верхней левой точке (31.9244, 31.9244)
      ..cubicTo(
        w * -0.049, h * 0.563, // Контрольная точка 1 (-10.6415, 143.503)
        w * -0.049, h * 0.292, // Контрольная точка 2 (-10.6414, 74.4902)
        w * 0.146, h * 0.125, // Конечная точка (31.9244, 31.9244)
      )
      // Кривая к верхней правой точке (186.069, 31.9244)
      ..cubicTo(
        w * 0.342, h * -0.042, // Контрольная точка 1 (74.4903, -10.6415)
        w * 0.658, h * -0.042, // Контрольная точка 2 (143.503, -10.6415)
        w * 0.854, h * 0.125, // Конечная точка (186.069, 31.9244)
      )
      // Кривая вниз вправо (186.069, 186.069)
      ..cubicTo(
        w * 1.049, h * 0.292, // Контрольная точка 1 (228.635, 74.4902)
        w * 1.049, h * 0.563, // Контрольная точка 2 (228.635, 143.503)
        w * 0.854, h * 0.730, // Конечная точка (186.069, 186.069)
      )
      // Линия вниз к началу (123.139, 248.999)
      ..lineTo(w * 0.565, h * 0.976)
      ..close();
  }

  @override
  bool shouldReclip(CustomClipper<Path> oldClipper) => false;
}

